hey guys

This package is very experimental!

Please report any bug you found to bugs@moonlake.de.

so, now to the good things :)

it's all gpl, so see:

Copyright 2008-2009 Mario Bielert <mario@moonlake.de>

This program is free software; you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation; either version 2 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program; if not, write to the Free Software
Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston,
MA 02110-1301, USA.

WHAT YOU NEED:

- a bit know-how about NFS
- a nfs - server with some shares (with are reportet via avahi or use the nfsmount-exporter)
- avahi and the python bindings
- lot of time and coffee :)


INSTALLATION:
(this works for Debian Lenny 5.0 amd64, other arches or Distribution should work similar)

0. get root privileges :)

1. first you need the nfsmount-browser.

this is the deamon part.
it scans the network over avahi (uses dbus) for any exported nfs shares.
perfectly they look like this:
name: some unique name, i've prefer FQDN:/path/to/share
port: 2049 (anyways, it's the standard)
type: _nfs._tcp (don't ask me why, it IS so)
TXT: path=/path/to/share
also this deamon provides information and handling over dbus, that uses the applet.

also this deamon mounts the shares, so it will need root rights!

my advice is, to install the deamon as a service.

for debian based just run src/nfs-mount-browser/install.sh.

note: you will need the packages python-avahi, python-dbus, nfs-common, avahi-server

2. the applet

run src/nfs-mount-systray/install.sh

note: you will need the packages python-avahi, python-dbus, avahi-deamon


3. nfsmount-exporter (optional)

this is a second deamon which exports your nfs-exports on your machine.
until now it's a little hack :)
it reads /etc/exports an then call for each line "avahi-publish-service ExportName 2049 _nfs._tcp path=/path/to/share"
this is also a way you can use.

run src/nfs-mount-exporter/install.sh

note: you will need the package avahi-utils, nfs-kernel-server, avahi-server, python-dbus, python-avahi

DOCUMENTATION

at this point here is just a short list of dbus doc for the nfsmount-browser deamon:

busname "de.dragon_soft.nfsmount"
objectpath "/de/dragon_soft/nfsmount"

signals:

    newShare    (string share) - Called when a new Share is found 
    removeShare (string share) - Called when a known Share gets offline. (At this point mounted shares will be unmounted automaticly)
    mountedShare(string share) - Called when a share is mounted succesful
    unmountShare(string share) - Called when a share is unmounted successful
    
methods:

    getShareList()               - returns a list of founded shares
    getMountList()               - returns a list of mounted shares (allways this is a part of getShareList())
    getShareInfo(string share)   - returns a list with [name, host, address, port, path] of the given share
    isShareMounted(string share) - returns a boolean whether given share is mounted or not
    mountShare(share)            - mounts a given share (if success, signal mountedShare() is called)
    unmountShare(share)          - unmounts a given share (if success, signal unmountedShare() is called)
    
so far.

please send me some feedback :)

mario bielert
